<?php
    $classi = [
        "Classe 1A" => [
            [
                "id" => 1,
                "nome" => "Marco",
                "cognome" => "Rossi",
                "anni" => 23,
                "voto_medio" => 8.5,
                "linguaggio_preferito" => "PHP",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 2,
                "nome" => "Luca",
                "cognome" => "Verdi",
                "anni" => 27,
                "voto_medio" => 3.5,
                "linguaggio_preferito" => "JS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 3,
                "nome" => "Giulia",
                "cognome" => "Bianchi",
                "anni" => 23,
                "voto_medio" => 5.5,
                "linguaggio_preferito" => "CSS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 4,
                "nome" => "Sofia",
                "cognome" => "Russo",
                "anni" => 27,
                "voto_medio" => 8.0,
                "linguaggio_preferito" => "HTML",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 5,
                "nome" => "Andrea",
                "cognome" => "Ferrari",
                "anni" => 22,
                "voto_medio" => 7.5,
                "linguaggio_preferito" => "PHP",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
        ],
        "Classe 2A" => [
            [
                "id" => 27,
                "nome" => "Francesca",
                "cognome" => "Ricci",
                "anni" => 27,
                "voto_medio" => 9.0,
                "linguaggio_preferito" => "JS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 22,
                "nome" => "Matteo",
                "cognome" => "Moretti",
                "anni" => 23,
                "voto_medio" => 4.3,
                "linguaggio_preferito" => "HTML",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 30,
                "nome" => "Alessandro",
                "cognome" => "Lombardi",
                "anni" => 27,
                "voto_medio" => 5.4,
                "linguaggio_preferito" => "CSS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 33,
                "nome" => "Elena",
                "cognome" => "Conti",
                "anni" => 22,
                "voto_medio" => 8.4,
                "linguaggio_preferito" => "PHP",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 20,
                "nome" => "Valeria",
                "cognome" => "Gallo",
                "anni" => 27,
                "voto_medio" => 9.5,
                "linguaggio_preferito" => "JS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
        ],
        "Classe 3A" => [
            [
                "id" => 31,
                "nome" => "Simone",
                "cognome" => "Fabbri",
                "anni" => 22,
                "voto_medio" => 6.9,
                "linguaggio_preferito" => "CSS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 32,
                "nome" => "Chiara",
                "cognome" => "Riva",
                "anni" => 27,
                "voto_medio" => 5.3,
                "linguaggio_preferito" => "HTML",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 33,
                "nome" => "Lorenzo",
                "cognome" => "Orlando",
                "anni" => 22,
                "voto_medio" => 8.2,
                "linguaggio_preferito" => "PHP",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 34,
                "nome" => "Marta",
                "cognome" => "Martini",
                "anni" => 22,
                "voto_medio" => 4.8,
                "linguaggio_preferito" => "JS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 35,
                "nome" => "Giovanni",
                "cognome" => "Giuliani",
                "anni" => 27,
                "voto_medio" => 8.1,
                "linguaggio_preferito" => "CSS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
        ],
        "Classe 4A" => [
            [
                "id" => 46,
                "nome" => "Silvia",
                "cognome" => "De Luca",
                "anni" => 30,
                "voto_medio" => 4.2,
                "linguaggio_preferito" => "PHP",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 47,
                "nome" => "Federico",
                "cognome" => "Costa",
                "anni" => 30,
                "voto_medio" => 5.1,
                "linguaggio_preferito" => "HTML",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 48,
                "nome" => "Michele",
                "cognome" => "Cattaneo",
                "anni" => 22,
                "voto_medio" => 3.7,
                "linguaggio_preferito" => "JS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 49,
                "nome" => "Anna",
                "cognome" => "Serra",
                "anni" => 30,
                "voto_medio" => 8.6,
                "linguaggio_preferito" => "CSS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 50,
                "nome" => "Antonio",
                "cognome" => "Cervi",
                "anni" => 30,
                "voto_medio" => 4.0,
                "linguaggio_preferito" => "PHP",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
        ],
        "Classe 5A" => [
            [
                "id" => 61,
                "nome" => "Davide",
                "cognome" => "Ferrero",
                "anni" => 33,
                "voto_medio" => 8.7,
                "linguaggio_preferito" => "JS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 62,
                "nome" => "Sara",
                "cognome" => "Leoni",
                "anni" => 33,
                "voto_medio" => 4.1,
                "linguaggio_preferito" => "PHP",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 63,
                "nome" => "Daniele",
                "cognome" => "Bertoni",
                "anni" => 33,
                "voto_medio" => 4.4,
                "linguaggio_preferito" => "HTML",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 64,
                "nome" => "Giada",
                "cognome" => "Ragusa",
                "anni" => 30,
                "voto_medio" => 5.0,
                "linguaggio_preferito" => "CSS",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
            [
                "id" => 65,
                "nome" => "Claudio",
                "cognome" => "Lanza",
                "anni" => 30,
                "voto_medio" => 6.7,
                "linguaggio_preferito" => "PHP",
                "immagine" => "https://source.unsplash.com/random/200x200?person",
            ],
        ],
    ];

    //Snack 4B: Filtrare il nostro array e mostrare, sempre suddivisi per classe, esclusivamente gli studenti e le studentesse con voto medio sufficiente.


$filteredStudents;
if (isset($_GET["userGrade"])) {
    $filteredStudents = [];
    foreach ($classi as $singleClass => $listClass) {
        foreach  ($listClass as $itemClass => $student) {
            if($student["voto_medio"] <= $_GET["userGrade"]){
                $filteredStudents = $student;
            }  
        }
    }
} else {
    $filteredStudents = $classi; 
}


?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snack 4</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../style/style.css">
</head>
<body>
    <main class="container">
        <h1 class="text-center fw-bold fs-3 mb-3">Snack 4</h1>

        <form action="snack4.php" method="GET" class="mb-3">
            <div class="mb-2">
                <label for="userGrade" class="form-label">inserisci un voto da 1 a 10</label>
                <input type="number" class="form-control" id="userGrade" name="userGrade" min="1" max="10">
            </div>
            
            <button type="submit" class="btn btn-sm btn-primary">Submit</button>
            <button type="reset" class="btn btn-sm btn-danger">Reset</button>
        </form>
        
        <?php foreach ($filteredStudents as $singleClass => $listClass) { ?>
            <h5> <?= $singleClass ?> </h5>
            
            <?php foreach ($listClass as $itemClass => $student) { ?>
                <div class="card ms-3 mb-2" style="width: 18rem;">
                    <div class="card-header">
                        <p><?= "Nome :" . $student["nome"] ?> <?= $student["cognome"] ?></p>
                    </div>
                    <ul class="list-group list-group-flush">
                        <p class="ms-3"><?= "Anni :" . $student["anni"] ?></p>
                        <p class="ms-3"><?= "voto medio :" . $student["voto_medio"] ?></p>
                        <p class="ms-3"><?= "Linguaggio preferito :" . $student["linguaggio_preferito"] ?></p>
                    </ul>
                </div>
            <?php } ?>
        <?php } ?>
        
        <!--
        <h2 class="fw-bold fs-3 my-3">studenti con media sufficente</h2>
        <?php foreach  ($classi as $singleClass => $listClass) { ?>
            <h5> <?= $singleClass ?> </h5>
            <?php foreach  ($listClass as $itemClass => $student) { ?>
                <?php if ($student["voto_medio"] >= 6) { ?>
                    <ul>
                        <li>
                            <p><?= "Nome :" . $student["nome"] ?> <?= $student["cognome"] ?></p>
                            <p class="ms-3"><?= "Anni :" . $student["anni"] ?></p>
                            <p class="ms-3"><?= "voto medio :" . $student["voto_medio"] ?></p>
                            <p class="ms-3"><?= "Linguaggio preferito :" . $student["linguaggio_preferito"] ?></p>
                        </li>
                    </ul>
                <?php } ?>
            <?php } ?>
        <?php } ?>
        -->
        
    </main>
    
    
   
</body>
</html>
 